language: java
jdk:
- openjdk8
services:
- docker
script:
- "./mvnw clean install -DskipTests"
- "./mvnw jib:build -P deploy-docker"
before_install:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- docker pull openjdk:8-jdk-alpine
- chmod +x mvnw
deploy:
  provider: heroku
  api_key:
    secure: M3eaaN9KmfgpnCPM17BMm+Zxu9PWhl7lu+KwLgmb0BBODuKeqvg8+KSXwI3OnsM86Dz+Jww7WgReHnIhRdl1KXTo6b0X71KUAp0pRyfsfG0qJsp6LbBWOVZ9tDx1O4e/5+ndae58iR6A4oD6O9ZTJwmEO7S75pP8Azr3R+v8kinoUJ/SpWiKkJ/+fjPxLIsRaDdIHXTJ68+uZcHF8uHuRPX7qqEd6JD6Fgg+mOzolOUvIZpx3jEKj0/xG6tM82sHLAHS0xYTLowyCyYvbQDnRPpZNH/0hV8psSD8BS8KlQApwH/7lYoG6TLSrh4QR8ge+S9ivqzvIbxRVzY/JJ461tN7oHOXCNFewof6siO5u3KonVyUjWibZXMcJOlzIOQlDDfpEDn/bqNsvsNlhAFYIKjzjGRbBQ3AJ4bMSv7Mb4E0Sdu4C6a9t4NmuBw/F1YBbYp3sCEXWvqIa2ErJLBWGqpZTklb0utZqi2qHD5kVU4JHFEdxHOntMP7VHnhfvvp3Qe2HO/eXmNwn6qTLp8SZC9oLrtt5cj5jb0N3v1xlUN6ZQVOvScPZCljF8SbRtsBEL9S6NHRFQjLpvoq15GmA0ajKriNNo8+2v0wPJw9Dm7LyM2088fiUHGlHGpmG8yTwQ9EpE/eT/IJuqTlXS6JDT8NiiE+tahcTQ0dSm5Bl68=
  app: petvet-api
